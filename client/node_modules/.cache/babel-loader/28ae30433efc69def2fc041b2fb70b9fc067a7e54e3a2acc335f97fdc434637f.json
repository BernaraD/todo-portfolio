{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bernarad/WebstormProjects/todo-portfolio/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bernarad/WebstormProjects/todo-portfolio/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bernarad/WebstormProjects/todo-portfolio/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Auth(){var _useCookies=useCookies(null),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];// console.log( email, password, confirmPassword );\n// console.log( 'cookies', cookies );\nvar viewLogin=function viewLogin(status){setIsLogin(status);setError(null);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e,endpoint){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!isLogin&&password!==confirmPassword)){_context.next=4;break;}setError(\"Make sure passwords match!\");return _context.abrupt(\"return\");case 4:_context.next=6;return fetch(\"\".concat(process.env.REACT_APP_SERVERURL,\"/\").concat(endpoint),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});case 6:response=_context.sent;_context.next=9;return response.json();case 9:data=_context.sent;if(data.detail){setError(data.detail);// console.log(data)\n}else{// if logged in successfully, set the Cookies and refresh the page:\nsetCookie('Email',data.email);setCookie('AuthToken',data.token);//refresh the page with all the content that user's todos\nwindow.location.reload();}case 11:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container-box\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:isLogin?\"Please log in \":\"Please sign up\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}}),!isLogin&&/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"create\",onClick:function onClick(e){return handleSubmit(e,isLogin?'login':'signup');}}),error&&/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-options\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return viewLogin(false);},style:{backgroundColor:!isLogin?'rgb(255, 255, 255':'rgb(188, 188, 188)'},children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return viewLogin(true);},style:{backgroundColor:isLogin?'rgb(255, 255, 255':'rgb(188, 188, 188)'},children:\"Login\"})]})]})});}export default Auth;","map":{"version":3,"names":["useState","useCookies","jsx","_jsx","jsxs","_jsxs","Auth","_useCookies","_useCookies2","_slicedToArray","cookies","setCookie","removeCookie","_useState","_useState2","isLogin","setIsLogin","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","confirmPassword","setConfirmPassword","_useState9","_useState10","error","setError","viewLogin","status","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","endpoint","response","data","wrap","_callee$","_context","prev","next","preventDefault","abrupt","fetch","concat","process","env","REACT_APP_SERVERURL","method","headers","body","JSON","stringify","sent","json","detail","token","window","location","reload","stop","_x","_x2","apply","arguments","className","children","type","placeholder","onChange","target","value","onClick","style","backgroundColor"],"sources":["/Users/bernarad/WebstormProjects/todo-portfolio/client/src/components/Auth.js"],"sourcesContent":["import { useState } from 'react';\nimport { useCookies } from 'react-cookie';\n\nfunction Auth() {\n    const [cookies, setCookie, removeCookie] = useCookies( null );\n    const [isLogin, setIsLogin] = useState( true );\n    const [email, setEmail] = useState( null );\n    const [password, setPassword] = useState( null );\n    const [confirmPassword, setConfirmPassword] = useState( null )\n    const [error, setError] = useState( null );\n\n    // console.log( email, password, confirmPassword );\n    // console.log( 'cookies', cookies );\n\n\n    const viewLogin = (status) => {\n        setIsLogin( status )\n        setError( null )\n    }\n\n\n    const handleSubmit = async (e, endpoint) => {\n        e.preventDefault()\n        if (!isLogin && password !== confirmPassword) {\n            setError( \"Make sure passwords match!\" )\n            return\n        }\n        //Sending data to the server, either login or signup - conditionally\n        const response = await fetch( `${process.env.REACT_APP_SERVERURL}/${ endpoint }`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify( { email, password } )\n        } )\n\n        //wait for the data we receive back from server and assign it to const data\n        const data = await response.json()\n\n        if (data.detail) {\n            setError( data.detail )\n            // console.log(data)\n        } else {\n            // if logged in successfully, set the Cookies and refresh the page:\n            setCookie('Email', data.email)\n            setCookie('AuthToken', data.token)\n\n            //refresh the page with all the content that user's todos\n            window.location.reload()\n        }\n    }\n\n    return (\n        <div className=\"auth-container\">\n            <div className=\"auth-container-box\">\n                <form>\n                    <h2>{ isLogin ? \"Please log in \" : \"Please sign up\" }</h2>\n\n                    <input\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        onChange={ (e) => setEmail( e.target.value ) }\n                    />\n                    <input\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        onChange={ (e) => setPassword( e.target.value ) }\n                    />\n\n                    {/*Only see if you are signing up*/ }\n                    { !isLogin && <input\n                        type=\"password\"\n                        placeholder=\"Confirm password\"\n                        onChange={ (e) => setConfirmPassword( e.target.value ) }\n                    /> }\n\n                    <input\n                        type=\"submit\"\n                        className=\"create\"\n                        onClick={ (e) =>\n                            handleSubmit( e, isLogin ? 'login' : 'signup' ) }/>\n\n                    { error && <p>{ error }</p> }\n                </form>\n\n                <div className=\"auth-options\">\n                    <button\n                        onClick={ () => viewLogin( false ) }\n                        style={ { backgroundColor: !isLogin ? 'rgb(255, 255, 255' : 'rgb(188, 188, 188)' } }\n                    >Sign Up\n                    </button>\n\n                    <button\n                        onClick={ () => viewLogin( true ) }\n                        style={ { backgroundColor: isLogin ? 'rgb(255, 255, 255' : 'rgb(188, 188, 188)' } }\n                    >Login\n                    </button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Auth;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bernarad/WebstormProjects/todo-portfolio/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bernarad/WebstormProjects/todo-portfolio/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bernarad/WebstormProjects/todo-portfolio/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ListHeader from\"./components/ListHeader\";import{useEffect,useState}from\"react\";import ListItem from\"./components/ListItem\";import Auth from\"./components/Auth\";import{useCookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useCookies=useCookies(null),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var authToken=cookies.AuthToken;// const authToken = false;\nvar userEmail=cookies.Email;// hard coded before cookies const userEmail = 'bernie@test.com';\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),tasks=_useState2[0],setTasks=_useState2[1];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(process.env.REACT_APP_SERVERURL,\"/todos/\").concat(userEmail));case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;setTasks(json);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function getData(){return _ref.apply(this,arguments);};}();// If we are not logged in, nothing loads,\n// If logged in - once data is received we want to call our getData function with useEffect\nuseEffect(function(){if(authToken){getData();}},[]);//Sort by date\nvar sortedTasks=tasks===null||tasks===void 0?void 0:tasks.sort(function(a,b){return new Date(a.date)-new Date(b.date);});return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[!authToken&&/*#__PURE__*/_jsx(Auth,{}),authToken&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ListHeader,{listName:'📝 Task keeper',getData:getData}),/*#__PURE__*/_jsxs(\"p\",{className:\"user-email\",children:[\"Welcome back \",userEmail,\" \"]}),sortedTasks===null||sortedTasks===void 0?void 0:sortedTasks.map(function(task){return/*#__PURE__*/_jsx(ListItem,{task:task,getData:getData},task.id);})]}),/*#__PURE__*/_jsx(\"p\",{className:\"copyright\",children:\"\\xA9BM LLC\"})]});}export default App;","map":{"version":3,"names":["ListHeader","useEffect","useState","ListItem","Auth","useCookies","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useCookies","_useCookies2","_slicedToArray","cookies","setCookie","removeCookie","authToken","AuthToken","userEmail","Email","_useState","_useState2","tasks","setTasks","getData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","json","wrap","_callee$","_context","prev","next","fetch","concat","process","env","REACT_APP_SERVERURL","sent","t0","console","log","stop","apply","arguments","sortedTasks","sort","a","b","Date","date","className","children","listName","map","task","id"],"sources":["/Users/bernarad/WebstormProjects/todo-portfolio/client/src/App.js"],"sourcesContent":["import ListHeader from \"./components/ListHeader\";\nimport { useEffect, useState } from \"react\";\nimport ListItem from \"./components/ListItem\";\nimport Auth from \"./components/Auth\";\nimport { useCookies } from \"react-cookie\";\n\nfunction App() {\n    const [cookies, setCookie, removeCookie] = useCookies( null )\n    const authToken = cookies.AuthToken   // const authToken = false;\n    const userEmail = cookies.Email;      // hard coded before cookies const userEmail = 'bernie@test.com';\n\n    const [tasks, setTasks] = useState( null );\n\n    const getData = async () => {\n        try {\n            const response = await fetch( `${ process.env.REACT_APP_SERVERURL }/todos/${ userEmail }` )\n            const json = await response.json();\n            setTasks( json )\n        } catch ( err ) {\n            console.log( err )\n        }\n    }\n\n// If we are not logged in, nothing loads,\n// If logged in - once data is received we want to call our getData function with useEffect\n    useEffect( () => {\n            if (authToken) {\n                getData()\n            }\n        }\n        , [] );\n\n    //Sort by date\n    const sortedTasks = tasks?.sort( (a, b) => new Date( a.date ) - new Date( b.date ) )\n\n\n    return (\n        <div className=\"app\">\n            { !authToken && <Auth/> }\n            { authToken &&\n                <>\n                    <ListHeader\n                        listName={ '📝 Task keeper' }\n                        getData={ getData }\n                    />\n                    <p className=\"user-email\">Welcome back {userEmail} </p>\n                    { sortedTasks?.map( (task) =>\n                        <ListItem key={ task.id }\n                                  task={ task }\n                                  getData={ getData }\n                        /> ) }\n                </>\n            }\n            <p className=\"copyright\">©BM LLC</p>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}